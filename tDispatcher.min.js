var tDispatcher=function(){function e(){this._events={dispatched:[]};this.isDispatching=!1;this._actions=[]}e.prototype.on=function(a,d){"string"==typeof a&&(a={event:a,name:(0xfffffffffffff*Math.random()).toString(16)+""+(0xfffffffffffff*Math.random()).toString(16),callback:d});a.event in this._events||(this._events[a.event]={});this._events[a.event][a.name]=a};e.prototype.off=function(a,d){if(!a)this._events={};else if(!d)delete this._events[a];else if(this._events[a])if("function"==typeof d){var f=
this._events[a],c;for(c in f)f[c].callback===d&&delete f[c]}else delete this._events[a][d]};e.prototype.trigger=function(a,d){"string"===typeof a&&(a={event:a});void 0!==d&&(a.value=d);if(a.event&&(this._actions.push(a),!this.isDispatching)){for(this.isDispatching=!0;a=this._actions.shift();)if(this._events[a.event]){var f=1,c={},g=this._events[a.event],b;for(b in g)c[b]=g[b];for(g={};0!=f;)for(b in f=0,c){if(c[b].require){for(var e=!1,h=0;h<c[b].require.length;h++)if(!g[c[b].require[h]]){e=!0;break}if(e)continue}g[b]=
!0;c[b].callback(a);delete c[b];f++}}for(b=this._events.dispatched.length;b--;)this._events.dispatched[b](a);this.isDispatching=!1}};return e}();