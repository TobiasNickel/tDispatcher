var tDispatcher=function(){function c(){this._events={dispatched:[]};this.isDispatching=!1;this._actions=[]}c.prototype.on=function(a){a.event in this._events||(this._events[a.event]={});this._events[a.event][a.name]=a};c.prototype.off=function(a,e){a?callback?delete this._events[a][e]:delete this._events[a]:this._events={}};c.prototype.trigger=function(a){"string"===typeof a&&(a={event:a});if(a.event&&(this._actions.push(a),!this.isDispatching)){for(this.isDispatching=!0;a=this._actions.shift();)if(this._events[a.event]){var e=
1,d={},f=this._events[a.event],b;for(b in f)d[b]=f[b];for(f={};0!=e;)for(b in e=0,d){if(d[b].require){for(var c=!1,g=0;g<d[b].require.length;g++)if(!f[d[b].require[g]]){c=!0;break}if(c)continue}f[b]=!0;d[b].callback(a);delete d[b];e++}}for(b=this._events.dispatched.length;b--;)this._events.dispatched[b](a);this.isDispatching=!1}};return c}();